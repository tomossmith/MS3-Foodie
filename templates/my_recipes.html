{% extends "base.html" %}
{% block content %}

  {% if session.user|lower == username|lower %}

    <div class="row">
      <div class="col s12 m8 offset-m2">
        <div class="card-panel">
          <h3 class="center-align text-darken-4">
            {{ username }}'s Recipe's
          </h3>
        </div>
      </div>
    </div>


    <div class="row">
      {% if count > 0 %}

      {% for recipe in recipes %}
      <div class="col s12 m12 l6">
        <div class="card">
          <div class="card-content">
            <div class="card-image center-align">
              <img id="recipe_img" src="{{ recipe.recipe_image_url }}">
            </div>
          </div>
          <div class="card-content red">
            <div class="row">
              <h3 id="recipe-title" class="card-title white-text text-shadow center-align">{{ recipe.recipe_name }}</h3>
            </div>
            <div id="tab-details">
              <!-- RECIPE DESCRIPTION-->
              <div class="row">
                <div class="col s12">
                  <p class="white-text">{{ recipe.recipe_description }}</p>
                </div>
              </div>

              <!-- RECIPE KEY ROW 1-->
              <div class="row">
                <div class="col s6">
                  <p class="white-text">Serves: {{ recipe.recipe_serving }} </p>
                </div>
                <div class="col s6">
                  <p class="white-text">Cooking Time: {{ recipe.recipe_cook_time }} minutes</p>
                </div>
              </div>

              <!-- RECIPE KEY ROW 2-->
              <div class="row">
                <div class="col s6">
                  <p class="white-text">Difficulty: &nbsp;
                    {% if recipe.recipe_difficulty == 'Easy' %}
                    <i class="far fa-check-circle"></i>
                    <i class="far fa-circle"></i>
                    <i class="far fa-circle"></i>
                    {% endif %}

                    {% if recipe.recipe_difficulty == 'Medium' %}
                    <i class="far fa-check-circle"></i>
                    <i class="far fa-check-circle"></i>
                    <i class="far fa-circle"></i>
                    {% endif %}

                    {% if recipe.recipe_difficulty == 'Hard' %}
                    <i class="far fa-check-circle"></i>
                    <i class="far fa-check-circle"></i>
                    <i class="far fa-check-circle"></i>
                    {% endif %}
                  </p>

                </div>

                <div class="col s6">
                  <p class="white-text">Spice: &nbsp;
                    {% if recipe.recipe_spice == 'Not Spicy' %}
                    <i class="fas fa-times"></i>
                    {% endif %}

                    {% if recipe.recipe_spice == 'Mild' %}
                    <i class="fas fa-pepper-hot"></i>
                    {% endif %}

                    {% if recipe.recipe_spice == 'Hot' %}
                    <i class="fas fa-pepper-hot"></i>
                    <i class="fas fa-pepper-hot"></i>
                    {% endif %}

                    {% if recipe.recipe_spice == 'Very Hot' %}
                    <i class="fas fa-pepper-hot"></i>
                    <i class="fas fa-pepper-hot"></i>
                    <i class="fas fa-pepper-hot"></i>
                    {% endif %}
                  </p>
                </div>
                <br>
                <br>
                <br>
                <div class="row center-align">
                  <a class="waves-effect waves-light btn" href="{{ url_for('open_recipe',recipe_id=recipe._id) }}">Open
                    Recipe</a>
                  <a class="waves-effect waves-light btn" href="{{ url_for('edit_recipe',recipe_id=recipe._id) }}">Edit
                    Recipe</a>
                  <a class="waves-effect waves-light btn" href="{{ url_for('delete_recipe',recipe_id=recipe._id) }}">Delete
                    Recipe</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}

      {% else %}
      <div>
        <h3 class="center-align white-text"> You haven't uploaded any recipes yet.</h3>
      </div>
      {% endif %}
    </div>

  {% else %}

  <!-- RESTRICTED TO AUTHORISED USER ONLY MESSAGE-->
  <div class="col s12 m4">
    <div class="card red">
      <div class="card-content">
        <div class="row white-text center-align text-shadow">
          <i class="fas fa-user-lock fa-7x"></i>
        </div>
        <h3 class="white-text center-align text-shadow oswald"> ACCESS DENIED <br> You need permission to access this page.</h3>
        <br>

        <!-- LOGIN BUTTON -->
        <div class="row">
          <div class="col s12">
            <p class="center-align white-text">
              Return to the <img id="text-logo" src="/static/images/logo.png" alt="Foodie Logo"> homepage?
            </p>
          </div>
          <div class="col s12">
            <div class="col s5"></div>
            <a href="{{ url_for('get_recipes') }}">
              <button class="col s2 btn-large text-shadow default-button">
                Home<i class="fas fa-sign-in-alt"></i>
              </button>
            </a>
            <div class="col s5"></div>
          </div>
        </div>
      </div>
    </div>
  </div>


  {% endif %}

{% endblock %}